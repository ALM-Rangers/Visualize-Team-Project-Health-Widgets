define(["VSS/Controls","VSS/Controls/Combos"],function(e,t){return function(e){function t(i){if(n[i])return n[i].exports;var o=n[i]={i:i,l:!1,exports:{}};return e[i].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:i})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=15)}({15:function(e,t,n){var i,o,r=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(o,r){function s(e){try{u(i.next(e))}catch(e){r(e)}}function a(e){try{u(i.throw(e))}catch(e){r(e)}}function u(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(s,a)}u((i=i.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){function n(e){return function(t){return i([e,t])}}function i(n){if(o)throw new TypeError("Generator is already executing.");for(;u;)try{if(o=1,r&&(s=r[2&n[0]?"return":n[0]?"throw":"next"])&&!(s=s.call(r,n[1])).done)return s;switch(r=0,s&&(n=[0,s.value]),n[0]){case 0:case 1:s=n;break;case 4:return u.label++,{value:n[1],done:!1};case 5:u.label++,r=n[1],n=[0];continue;case 7:n=u.ops.pop(),u.trys.pop();continue;default:if(s=u.trys,!(s=s.length>0&&s[s.length-1])&&(6===n[0]||2===n[0])){u=0;continue}if(3===n[0]&&(!s||n[1]>s[0]&&n[1]<s[3])){u.label=n[1];break}if(6===n[0]&&u.label<s[1]){u.label=s[1],s=n;break}if(s&&u.label<s[2]){u.label=s[2],u.ops.push(n);break}s[2]&&u.ops.pop(),u.trys.pop();continue}n=t.call(e,u)}catch(e){n=[6,e],r=0}finally{o=s=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var o,r,s,a,u={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return a={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a};i=[n,t,!function(){var e=new Error('Cannot find module "ReleaseManagement/Core/Contracts"');throw e.code="MODULE_NOT_FOUND",e}(),!function(){var e=new Error('Cannot find module "ReleaseManagement/Core/RestClient"');throw e.code="MODULE_NOT_FOUND",e}(),n(5),n(6)],void 0!==(o=function(e,t,n,i,o,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),VSS.require(["TFS/Dashboards/WidgetHelpers"],function(e){e.IncludeWidgetConfigurationStyles(),VSS.register("TPHealth-ReleaseOverviewWidget-Configuration",function(){return new u(e)}),VSS.notifyLoadSucceeded()});var u=function(){function e(e){this.WidgetHelpers=e,this.widgetConfigurationContext=null,this.combo=null,this.buildDefinitionDropDown=$(".build-definition-container"),this.showRejectedAsFailedCheckbox=$("#showRejectedAsFailed"),this.showRejectedAsFailed=!0}return e.prototype.load=function(e,t){return r(this,void 0,void 0,function(){var r,u,c,l,d,f,h,g,p,v;return s(this,function(s){switch(s.label){case 0:return this.widgetConfigurationContext=t,r=JSON.parse(e.customSettings.data),u=null,r&&(u=r.selectedDefinitions,this.showRejectedAsFailed=r.showRejectedAsFailed),this.showRejectedAsFailedCheckbox.prop("checked",this.showRejectedAsFailed),c="Select release definition(s)",$("#definitionLegend").text(c),l=VSS.getWebContext(),d=i.getClient(),[4,d.getReleaseDefinitions(l.project.id,void 0,void 0,void 0,void 0,void 0,void 0,n.ReleaseDefinitionQueryOrder.NameAscending)];case 1:return f=s.sent(),h=f.map(function(e){return e.name}),g={maxRowCount:4},p={dropOptions:g,source:h,type:"multi-value",value:u},this.combo=o.create(a.Combo,this.buildDefinitionDropDown,p),this.notifyOnChange(this.buildDefinitionDropDown),v=this,this.showRejectedAsFailedCheckbox.change(function(e){v.showRejectedAsFailed=this.checked,v.widgetConfigurationContext.notify(v.WidgetHelpers.WidgetEvent.ConfigurationChange,v.WidgetHelpers.WidgetEvent.Args(v.getCustomSettings()))}),[2,this.WidgetHelpers.WidgetStatusHelper.Success()]}})})},e.prototype.notifyOnChange=function(e){var t=this;e.change(function(){t.widgetConfigurationContext.notify(t.WidgetHelpers.WidgetEvent.ConfigurationChange,t.WidgetHelpers.WidgetEvent.Args(t.getCustomSettings()))})},e.prototype.getCustomSettings=function(){var e={selectedDefinitions:this.combo.getText(),showRejectedAsFailed:this.showRejectedAsFailed};return{data:JSON.stringify(e)}},e.prototype.onSave=function(){return this.WidgetHelpers.WidgetConfigurationSave.Valid(this.getCustomSettings())},e}();t.OverviewConfiguration=u}.apply(t,i))&&(e.exports=o)},5:function(t,n){t.exports=e},6:function(e,n){e.exports=t}})});